<p>Fun Fact: I missed the rebase and squash lab because I was so busy doing release 0.2 and other work in my class that it totally skipped my mine. David, if you're reading this, I hope I can squash any other 0s you give me in the future! :D</p>

<p>In this week's post, we're once again working with our link checker repo. This time, however, we're to make a new option that checks the urls of the last 10 blog posts featured on our school's open source website, Telescope. This means that I had to fork and setup telescope locally, which is totally fine since I have to work on it for release 0.3.</p>

<p>I had alot of trouble setting this thing up. It's to be expected with a code base this huge. I actually had so much trouble, I ended up even making a PR to fix some info in the environment-setup.md docs file that was confusing me. You can read the PR <a href="https://github.com/Seneca-CDOT/telescope/pull/1273">here</a></p>

<p>Eventually, I was able to successfully setup redis and elasticsearch using Docker (A tool I've been wanting to learn for awhile now). It then became a matter of running the backend and the frontend and then Telescope was able to be loaded in locally and successfully</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--qkoOv8jz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/lix4mquf7cfcve73c23l.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--qkoOv8jz--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/lix4mquf7cfcve73c23l.png" loading="lazy"></a></p>

<p>The telescope API is interesting with the many request urls and parameter queries you can pass into it. I didn't mess around with it that much and only focused on the required endpoint which was "/posts". </p>

<p>As for the actual link checker code, I didn't have to change much of it. I really only needed to add a new function to my urlClass that makes the request to the localhost url of telescope, deserialize the incoming response, then add the id of each post to the telescope posts url and call my makeRequests function with it</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--gPOESbxO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/jpovtmcfk96cicf8ntfe.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--gPOESbxO--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/jpovtmcfk96cicf8ntfe.png" loading="lazy"></a></p>

<p>This was the final result:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--OwU8KNhk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/zsuj3uf1w9ppim2hwija.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--OwU8KNhk--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/zsuj3uf1w9ppim2hwija.png" loading="lazy"></a></p>

<p>I also made a gist url that contains the diff result of my git diff, which highlights the changes that I made when I added the telescope feature. You can find that <a href="https://gist.github.com/HyperTHD/544b2900e612b5fbcd674931a4266f6a">here as well</a>!</p>

<p>Overall, I liked this lab. Setting up telescope was a pain, but a necessary one. It also gave me first-hand exposure to tools that I'd like to really work with more often such as Docker, Github Actions, and Gatsby.js. I know we're supposed to rewrite the frontend eventually using Next.js so it won't be long before Gatsby is removed. Surprisingly, many of these new tools are all dev-ops. Perhaps, I'll work more that in the future when I get more free time.</p>

<p>Until next time, everyone! Stay safe!</p><h2>Part 1 &amp; 2 The Set Up</h2><h2><p>&nbsp; &nbsp;&nbsp;For me, setting up Telescope was a tricky task, in order to run the backend server I had to learn how Reddis and Elasticsearch&nbsp; worked. I have never used Redis or Elasticsearch. However, after some reading I realized the power behind Elasticsearch, a search engine. After that I learned what Reddis was and got an idea of how they communicated with each other. In addition I had to learn how docker works. Docker sets up a container for your computer's environment. I noticed everything I needed was in the documentation. All hurdles could be solved by sitting down and reading the documentation.</p><div>  <div class="iframe-video-wrapper"><iframe src="https://giphy.com/embed/3o6ozD4FXYQNv5ERjy" loading="lazy"></iframe></div><p><a href="https://giphy.com/gifs/primerstories-check-list-3o6ozD4FXYQNv5ERjy"></a></p></div><p>&nbsp;&nbsp;&nbsp;&nbsp;The <a href="https://www.blogger.com/u/1/blog/post/edit/3618816638550590018/7481655554725518281#">environment-setup.md</a> helped guide me through the journey of setting up my environment. I will admit that it made the setting up process easier, however, the documentation did not explain how the backend was set up thoroughly. The environment was set up but I had no idea how it was all working. It felt like I was trying to figure out a jigsaw puzzle. Maybe updating the setup page could be an issue someone could fix. After setting up the backend, I read the next part of this week's lab. Part 3 and 4 of this lab got me thinking about how I should implement this week's task.</p></h2><h2>LEVEL UP!!! C++ to Python</h2><div><a href="https://1.bp.blogspot.com/-8O18majEa-g/X6ZVRMtFQfI/AAAAAAAAAI0/_K7g0GHviPATZDfpqlgkUwprpQ7M29x9gCLcBGAsYHQ/s750/FullSizeRender.jpeg"><img src="https://1.bp.blogspot.com/-8O18majEa-g/X6ZVRMtFQfI/AAAAAAAAAI0/_K7g0GHviPATZDfpqlgkUwprpQ7M29x9gCLcBGAsYHQ/s200/FullSizeRender.jpeg" loading="lazy"></a></div><p>&nbsp;&nbsp;&nbsp;&nbsp;Due to the requirements of this week's lab and my <a href="https://github.com/jiyoungsin/OSD_A1_Tool">previous project</a>, completing part 3 and 4 was a little challenging. Let me explain why. In the beginning, I thought that this project would be a simple Command line tool that we use and throw away, this was not the case. It is now the seventh week and the Command Line Interface program has a big role in our education. Initially, I thought this would be a quick and easy project. This led me to use bash the scripting language to create a quick solution. However, after implementing new features, I realized it would be better to use a programming language such as Python. I came to this conclusion as Python would allow me to create web API calls much easier than bash.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;This lab ultimately led me to rewriting this code in Python. Writing this code in python would allow me to structure the command line interface in a much more simple way. You can find the new repository here. This refactoring allowed me to remember all the assignments we had accomplished in the past few weeks. This gave me an idea on how to implement this week's tasks.</p><p>	Telescopes REST API was very simple to use, I had no issues integrating my program to the API. Since I rewrote the entire program I used the click library to add our previous options. This library also made accepting arguments simple. My code was a mess and I had to change a lot…&nbsp;</p><div><br></div><div>  <div class="iframe-video-wrapper"><iframe src="https://giphy.com/embed/lq4VhxXSC2oZdnky9L" loading="lazy"></iframe></div><p><a href="https://giphy.com/gifs/rickandmorty-season-3-adult-swim-rick-and-morty-lq4VhxXSC2oZdnky9L"></a></p></div><div>The next step seems simple. I should edit the <a href="https://github.com/jiyoungsin/Command-line-tool">README.md</a> to match the code created. I would like to understand what exactly what a gist is I have never used a gist before and must do some readings to understand what It is used for. Seems like I will be updating my own documentation.</div><h2>
  <a href="#well-not-much-of-a-break">
  </a>
  Well not much of a break.
</h2>

<p>This week was filled with a couple of firsts. The first week of my new job and the first time using most of the programs introduced this week. It was also the first time I'll be working with <a href="https://telescope.cdot.systems/">Telescope</a> and the first time using git diffs and GitHub Gist. Both of which I'm not terribly sure if I have a full grasp of yet.</p>

<h2>
  <a href="#the-set-up">
  </a>
  The Set Up
</h2>

<p>So for Lab 6, we were meant to set up Seneca's Telescope blog aggregator and to pump the links we get into our <a href="https://github.com/fluentinstroll/Link-Checker">Link Checker</a> apps. At least, we were meant to develop a proof of concept for the feature and upload the <a href="https://gist.github.com/fluentinstroll/5d0e4e40f614bae68a9ebff40e01c210">diff</a> to GitHub Gist.</p>

<p>Seems easy, right? Well, it requires a little more effort than that.</p>

<p>In order to set up Telescope we need 3 things: redis-server, Elasticsearch, and Docker. In order to properly run redis-server, we must also get WSL, a Linux subsystem for Windows.</p>

<p>WSL was a slight pain to get working but now that I have it I think I might use it forever. Running a dual boot system for a while just to develop web apps because so cumbersome that I gave up early last year and just used Windows. But with WSL I can run a Ubuntu terminal in vscode and kill two birds with one stone. The only thing I have to look out for is accidentally having like 5 terminals open at once which... I'm doing right now to gather screenshots for this blog post.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--Am9KlLvj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/ae4hzvhu0epn00ze6smy.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--Am9KlLvj--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/ae4hzvhu0epn00ze6smy.png" loading="lazy"></a></p>

<p>So redis-server is up, next is Elasticsearch. Now, I'm not too sure where I went wrong here but after properly installing Elasticsearch and getting it running properly, as well as verifying that all the ports were the same between them, I just couldn't get Elasticsearch to properly connect with the Telescope backend. This is unfortunate because I'd really like to get it properly working before I take a dive into Telescope for real. However, for just this lab, I was able to set up a limited Elasticsearch server to grab some blog posts from the API and help me with my work.</p>

<p>Finally, Docker. I'm not too sure where Docker fits into everything because I ran everything separately. However, I think I'll try to get it all together in a Docker container for the future as it seems like it'll make development a lot easier. I had an issue with setting up Docker with my WSL that involved having the Hyper-V VM running which made Docker crash. Weird stuff, but after a bit of research, it was easy to fix.</p>

<h2>
  <a href="#a-bit-of-coding">
  </a>
  A bit of coding
</h2>

<p>The objective is this: grab links to blog posts from the Telescope backend API, pipe them into a text file, grab the links from that text file, and finally test them to make sure they're good links like my app already does.</p>

<p>Simple, right?</p>

<p>This is the part where I say no, but actually it is.</p>

<h3>
  <a href="#indexjs-excerpt">
  </a>
  index.js excerpt
</h3>



<div>
<pre class="hljs javascript"><code><span class="hljs-keyword">if</span> (options.t) {

    <span class="hljs-keyword">var</span> url = <span class="hljs-string">'http://localhost:3000/posts/'</span>;

    req.get({
        <span class="hljs-attr">url</span>: url,
        <span class="hljs-attr">json</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">headers</span>: {
            <span class="hljs-string">'User-Agent'</span>: <span class="hljs-string">'request'</span>
        }
    }, (err, res, data) =&gt; {
        <span class="hljs-keyword">if</span> (err) {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Error:'</span>, err);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (res.statusCode !== <span class="hljs-number">200</span>) {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'localhost did not respond... check to see if your local telescope session is up...'</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">const</span> urls = data.map(e =&gt; url + e.id)

            fs.writeFile(<span class="hljs-string">'files/telescope.txt'</span>, <span class="hljs-built_in">JSON</span>.stringify(urls), <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
                <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
              }); 
        }
    });
}
</code></pre>
<div>
<div>
    Enter fullscreen mode
    


    Exit fullscreen mode
    


</div>
</div>
</div>



<p>The above code basically queries the local version of the Telescope API for the post ids, then we just stick the rest of the url to the front of the id, then write it straight into a file. </p>

<h3>
  <a href="#more-indexjs-excerpts">
  </a>
  more index.js excerpts
</h3>



<div>
<pre class="hljs typescript"><code><span class="hljs-keyword">if</span>(options.t){
    filename = <span class="hljs-string">'files/telescope.txt'</span>
}
<span class="hljs-keyword">else</span> {
        filename = <span class="hljs-string">`<span class="hljs-subst">${argv[<span class="hljs-number">2</span>]}</span>`</span>;
}
fs.readFile(filename, (err, fileContents) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">var</span> linkList = generateLinkList(fileContents);
        linkList = <span class="hljs-built_in">Array</span>.from(linkList);
    } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The app has recieved a wrong filename."</span>)
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Please enter a correct filename."</span>)
        exit(<span class="hljs-number">1</span>);
    }
    validateLinks(linkList)
})
</code></pre>
<div>
<div>
    Enter fullscreen mode
    


    Exit fullscreen mode
    


</div>
</div>
</div>



<p>This is also a simple change to the rest of the code, writing an if statement to check if we've used our telescope argument, and setting the file to that if so! Easy.</p>

<p>Frankly, I just had to add some connections to the local API and modify almost nothing else.</p>

<p>I want to be clear that this code is a proof of concept as outline in the Lab 6 instructions, it's not mean to be comprehensive and perfect for every situation (for example, I could have it query a backend API that I host on a Heroku server or something so that I won't have to set up the local server every time to use it), but it works well for what it is. I can't wait to expand upon this feature and fix up the code to be a lot more modular, which I think is going to be my next big refactor.</p>This week, I have started to work with
Telescope.Lab 6 is about adding an argument to check links in Telescope's recent 10 posts to the link checker command-line tool named url-fi which I created. The instruction of lab 6 is the following:&nbsp;&nbsp;<a href="https://github.com/Seneca-CDOT/topics-in-open-source-2020/wiki/lab-6">https://github.com/Seneca-CDOT/topics-in-open-source-2020/wiki/lab-6</a><div><div><br></div><div>The website named Telescope is an open-source web server and client application for aggregating and presenting a timeline of Seneca's open-source blogs. The way of setting up the Telescope and the GitHub repository links are the following:<br><div>Telescope GitHub repository:&nbsp;<a href="https://github.com/Seneca-CDOT/telescope">https://github.com/Seneca-CDOT/telescope</a></div><div>CONTRIBUTING guide:&nbsp;<a href="https://github.com/Seneca-CDOT/telescope/blob/master/docs/CONTRIBUTING.md">https://github.com/Seneca-CDOT/telescope/blob/master/docs/CONTRIBUTING.md</a></div><div>Environment Setup guide:&nbsp;<a href="https://github.com/Seneca-CDOT/telescope/blob/master/docs/environment-setup.md">https://github.com/Seneca-CDOT/telescope/blob/master/docs/environment-setup.md</a></div><div><br></div><div>After I set up the Telescope and can run it locally, I started improving my command-line tool by putting additional argument options. As way I can get the recent I used the way to get the recent Telescope 10 blogs is using the link "localhost:3000/posts" which gives the JSON format information about the link, I write some code to interact with the local Telescope server and get post links. There are representatively three parts I add my code to implement the feature.</div></div></div><div><br></div><div>First, I added const variable named telescopeUrl which is the link I can get the recent 10 Telecope blogs.</div><div><div><div>//telescope&nbsp;url</div><div>const&nbsp;telescopeUrl&nbsp;=&nbsp;"http://localhost:3000/posts";</div></div></div><div><br></div><div><div>Second, I created the function named checkTelescopePosts. It uses the variable named telescopeUrl to get the JSON file from the link. It checks all the links in the JSON file and displays the results of the URLs checking.</div><div><div><div>//&nbsp;Check&nbsp;telescope's&nbsp;recent&nbsp;10&nbsp;posts&nbsp;link</div><div>function&nbsp;checkTelescopePosts()&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;request(</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;telescopeUrl</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,&nbsp;function&nbsp;(err,&nbsp;res,&nbsp;body)&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;postIds&nbsp;=&nbsp;JSON.parse(body);</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(let&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;postIds.length;&nbsp;i++)&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;postUrl&nbsp;=&nbsp;`${telescopeUrl}/${postIds[i].id}`;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checkUrl(postUrl);</div><br><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(sFlag)&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checkUrl(postUrl.replace(/^http/,&nbsp;"https"));</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</div><div>}</div></div></div><div><br></div></div><div>Third, in the for loop I created to check the arguments, I added checking 't' argument part. When the user runs the tool with the argument t, it goes to the function named checkTelescopPosts.</div><div><div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(arg.includes("t"))&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tFlag&nbsp;=&nbsp;true;</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checkTelescopePosts();</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div></div></div><div><br></div><div>This is the output of my link checker when I run 'url-fi -t'.</div><div><div><a href="https://1.bp.blogspot.com/-fcX5uRrrhhI/X6TeDL1NC0I/AAAAAAAAA0c/QP9GW7jr2E8bTj5A2RPXvIZr_PaJitAXQCNcBGAsYHQ/s491/lab6%2B-%2Boutput.JPG"><img src="https://1.bp.blogspot.com/-fcX5uRrrhhI/X6TeDL1NC0I/AAAAAAAAA0c/QP9GW7jr2E8bTj5A2RPXvIZr_PaJitAXQCNcBGAsYHQ/w400-h186/lab6%2B-%2Boutput.JPG" loading="lazy"></a></div><br></div><div>There are additional coding parts I wrote to implement the feature such as creating t flag. You can check the detailed code changes looking at the gist I created for the lab6:&nbsp;&nbsp;<a href="https://gist.github.com/hyunjiLeeTech/89f4f8b97bdd66c1e814b0fb7dc3d9c0">https://gist.github.com/hyunjiLeeTech/89f4f8b97bdd66c1e814b0fb7dc3d9c0</a></div><div><br></div><div>While I am working on the lab6, I realized it would be better to move my functions to the bottom and move the main functions to the top. So I created commits to improve the maintenance. Also, I added more comments about my code:&nbsp;</div><div><ul><li><a href="https://github.com/hyunjiLeeTech/URL-FI/commit/af0cfe543c49ce05e3d6143c2188cbf387930baf">https://github.com/hyunjiLeeTech/URL-FI/commit/af0cfe543c49ce05e3d6143c2188cbf387930baf</a></li><li><a href="https://github.com/hyunjiLeeTech/URL-FI/commit/d85de2f0bc37350c8f5a7d8f27350d83daaa0392">https://github.com/hyunjiLeeTech/URL-FI/commit/d85de2f0bc37350c8f5a7d8f27350d83daaa0392</a></li></ul></div><div><br></div><div>The most difficult part of this lab was set up the Telescope. As the Telescope has some prerequisites such as Redis and Elasticsearch which I had not used before, I needed to install them and learn how to use docker, how to install Ubuntu. It was an interesting challenge but it takes the most time for my lab6. After I finish preparing the prerequisites, I ran the Telescope. Working with Telescope REST API itself was okay and modifying my link checker with the data from Telescope does not need lots of change. I just need to apply the way I've already written. I think my code is in good shape to accomplish and I feel I am ready to challenge a more complicated one.</div><h3>Lab 6 — DPS909</h3><p>Interacting with Telescope</p><p>This week I had the chance to interact with the <a href="https://github.com/Seneca-CDOT/telescope">Telescope</a> project. The installation process and setting up the environment went pretty well. This is due to the experience I had in the previous month installing the Mattermost server.</p><p>The task for this week was to pull the posts from Telescope API and check the links inside of these posts by using our <a href="https://github.com/egrinberg/Utest/">URL link checker</a>. I decided to create a function that sends a request to the local server which returns a JSON object with posts’ ids and URLs. Then I extracted all the posts ids and store them in the array. Then I iterate through the array of ids and called another function called writePostToFile with the id parameter.</p><pre>const writePostToFile = async (post,id) =&gt; {</pre><pre>fetch(post)</pre><pre>.then(</pre><pre>res =&gt;</pre><pre>new Promise((resolve, reject) =&gt; {</pre><pre>const path = `./telescope/posts/${id}`;</pre><pre>const dest = fs.createWriteStream(path);</pre><pre>res.body.pipe(dest);</pre><pre>res.body.on("end", () =&gt; resolve(path));</pre><pre>dest.on("error", reject);</pre><pre>})</pre><pre>)</pre><pre>.then(path =&gt; {</pre><pre>console.log(path);</pre><pre>let p = `${path}`;</pre><pre>fileHandler.processFile(p);</pre><pre>});</pre><p>This function sends a request to the local server with the specified post id, retrieves the text of the post and creates a new file with the post’s content. When the file is created it passes the file to the processFile function.</p><pre>const processFile =  (filename,json) =&gt; {</pre><pre>// Create stream with the file</pre><pre>let s = fs.createReadStream(filename);</pre><pre>return new Promise((resolve, reject) =&gt; {</pre><pre>s.on("data", (buf) =&gt; {</pre><pre>// Get all the URL links from the file</pre><pre>urlList = buf</pre><pre>.toString()</pre><pre>.match(/(http|https)(:\/\/)([\w+\-&amp;@`~#$%^*.=/?:]+)/gi);</pre><pre>// console.log(`${filename} ${urlList}`)</pre><pre>});<br></pre><pre>s.on("end", async () =&gt; {</pre><pre>var responseStatusByUrl = [];</pre><pre>var statusResponseForUrl;</pre><pre>//Iterate through the links and check their status</pre><pre>await Promise.all(</pre><pre>urlList.map(async (url) =&gt; {</pre><pre>try {</pre><pre>const urlTest = await fetch(url, { method: "head", timeout: 1500 });</pre><pre>statusResponseForUrl = { url: `${url}`, status: `${urlTest.status}` };</pre><pre>responseStatusByUrl.push(statusResponseForUrl);</pre><pre>} catch (error) {</pre><pre>statusResponseForUrl = { url: `${url}`, status: "UNKNOWN" };</pre><pre>responseStatusByUrl.push(statusResponseForUrl);</pre><pre>}</pre><pre>})</pre><pre>);</pre><pre>if (json) {</pre><pre>console.log(JSON.stringify(responseStatusByUrl));</pre><pre>} else {</pre><pre>printResponse(responseStatusByUrl);</pre><pre>}</pre><pre>process.exit(checkStatus(responseStatusByUrl));</pre><pre>});</pre><pre>s.on("error",error =&gt; reject(error));</pre><pre>});<br>}</pre><p>This function receives a file, extracts all the URLs, and checks all the URLs statuses.</p><p>The only issue I had while writing the code is the use of Promises which I am sure can be improved in my code. Hope to fix it in the&nbsp;future.</p><p>Commit of this work — -&gt; <a href="https://github.com/egrinberg/Utest/commit/5b3e1090c1dd85debcc35b400ecc33321536c6b7">Lab&nbsp;6</a>.</p><img src="https://medium.com/_/stat?event=post.clientViewed&amp;referrerSource=full_rss&amp;postId=11767c605e33" loading="lazy"><p>Because your web code is as clean as 8 year olds at day care. That's why. I really should have invested in a hand sanitizer company back in April. I wonder how well they're doing.</p>

<p>Anyway, as part of my continual blogging as part of my Open Source Development course, this week I'm going to discuss a PR constructed for our class project <a href="https://telescope.cdot.systems/">Telescope</a>. As part of our third assignment, we're required to contribute to a repo of our choosing, and some sort of contribution to Telescope. </p>

<blockquote>
<p><em>Telescope is an open source web server and client application for aggregating and presenting a timeline of Seneca's open source blogs. Telescope makes it easy to see what's happening with open source at Seneca right now.</em></p>
</blockquote>

<p>My JavaScript is near nonexistent but I really enjoy working with web technologies. Because of this week was hectic, confusing, yet also very exciting.</p>

<p>I'd really like to contribute towards the back end but my front end skills work really needs work. It was either this or contribute towards writing front end testing- which is on hold right now since we're <a href="https://dev.to/chrispinkney/release-0-2-3-or-pivoting-by-a-beautiful-little-fool-378g">pivoting to next.js</a>. <strong>Nonetheless, I decided to jump right into <a href="https://github.com/Seneca-CDOT/telescope/issues/1266">an issue that affected the User eXperience</a>, and as a bonus, an issue partially based on something that really excites me- <em>security</em>!</strong> This issue revolves around how an image (specifically, <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs">a particular type of image</a>) wasn't being loaded, and it was because of this that I found this issue so interesting:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s---BlA8IL1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://user-images.githubusercontent.com/427398/97818088-52703e00-1c6e-11eb-88e1-5c4666e583c8.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s---BlA8IL1--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://user-images.githubusercontent.com/427398/97818088-52703e00-1c6e-11eb-88e1-5c4666e583c8.png" loading="lazy"></a><br>
Telescope had scraped the original post, but not the <code><img></code> tag. What gives? Time to get my magnifying glass and top hat... like a nerdier Sherlock Holmes.</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--4OKDm11S--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/uds58rhcq4zmy4gxjuwj.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--4OKDm11S--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/uds58rhcq4zmy4gxjuwj.png" loading="lazy"></a></p>

<p>My first step was to explore Telescope and find out how it works, what makes it tick, maybe it enjoys long walks on the beach, or maybe a big it spends its free time dreaming of electric sheep 'neath the clouds. I got a hint from the issue post on GitHub that the <a href="https://github.com/apostrophecms/sanitize-html">Sanitizer</a> used with the project's parser likely the culprit. I dug around until I found the sanitizer module, then spent some time reading about how it works. I also spent an embarrassingly long amount of time reading about html tags and attributes... it's been a while. Finally I spent some time reading about how <code>data:</code> URIs work.</p>

<p>Once I oriented myself I spun up my local copy of the project, and got to work. My second step was to hunt down exactly what is and is not being accepted to the database when parsing a blog post. <strong>I decided that I should first determine if changing this file actually does anything, i.e. if I was even on the right track.</strong> I decided to (<em>hilariously</em>) tell the sanitizer to restrict <strong>all</strong> html tags.</p>

<p><em>Injecting a hilarious side note here, this is when I discovered that <code>dev.to</code> will block assets if hit enough times. You see, right when I decided to restrict all tags, the entire time I was making hits to a specific blog post that I wrote that had an image on it. I made my change and refreshed. And look! My image is gone! Great! Wait... wtf? Why are other people's images appearing still then? Furthermore, why does my post still have tags? Turns out <code>dev.to</code> uh... blocked my image from loading (it wasn't loading the actual Telescope site too.) Haha very funny guys. Just another thing I learned I guess. Anyway.</em></p>

<p>Each post should just be plaintext at this point right? Right! Well, no. I made a bunch of changes and turns out once a post is indexed to the database, it is how it is and forever shall be, sanitized tags et al. I noticed this behaviour when a conveniently timed post was indexed for the first time, and was just in plaintext. Perfect, I'm on the right track. Now I just have to reverse my changes and figure out how to unblock these types of images.</p>

<p>I went back to the sanitizers documentation and found what I needed:<br>
</p>

<div>
<pre class="hljs css"><code><span class="hljs-selector-tag">allowedSchemesByTag</span>: { <span class="hljs-attribute">img</span>: [<span class="hljs-string">'data'</span>] },
</code></pre>
<div>
<div>
    Enter fullscreen mode
    


    Exit fullscreen mode
    


</div>
</div>
</div>



<p>This simple one-line change enabled <code>img</code> tags that have a <code>data</code> scheme to be allowed. So... how do I test that this works? I asked around and my wonderful professor suggested, in much nicer words, that I stop wasting my time and instead write a unit test for this fix to see if an image with a <code>data</code> scheme was being received as expected. Good idea! And I also get to finally write a test! Something I've been tortured with for the last 2 years is now my own power. And here it is:</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--ekjw3_Un--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/luk752e3n5honr12dr4x.png"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--ekjw3_Un--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/luk752e3n5honr12dr4x.png" loading="lazy"></a><br>
(Sorry for the image, dev.to isn't letting me post this code in a code block.)</p>

<p>This is essentially just saying "I want this line of code to look the same when it comes out the other end of the sanitizer." And it did! I also made sure of this by modifying the test to see if it would break, and I made sure to reverse the changes made on the sanitizer to see if it would be blocked as expected, and it was! Success! Or... was it?</p>

<p><a href="https://res.cloudinary.com/practicaldev/image/fetch/s--0K7eaRAY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://media1.tenor.com/images/0495476ec262254ab968676f05ce1b0a/tenor.gif%3Fitemid%3D9251847"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--0K7eaRAY--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_66%2Cw_880/https://media1.tenor.com/images/0495476ec262254ab968676f05ce1b0a/tenor.gif%3Fitemid%3D9251847" loading="lazy"></a><br>
It was then that I realized the hubris and greed of my ways. Why on Earth was my new addition causing other tests to fail?? I stumbled on this issue for an hour or so until I noticed the problem. Maybe you'll notice it faster than me:<br>
</p>

<div>
<pre class="hljs css"><code><span class="hljs-selector-tag">allowedSchemesByTag</span>: { <span class="hljs-attribute">img</span>: [<span class="hljs-string">'data'</span>] },
</code></pre>
<div>
<div>
    Enter fullscreen mode
    


    Exit fullscreen mode
    


</div>
</div>
</div>



<p>See that's the thing about programming. Computers do exactly as instructed. I just hadn't told it the right schemes to allow... <em>sigh</em>.<br>
</p>

<div>
<pre class="hljs css"><code><span class="hljs-selector-tag">allowedSchemesByTag</span>: { <span class="hljs-attribute">img</span>: [<span class="hljs-string">'http'</span>, <span class="hljs-string">'https'</span>, <span class="hljs-string">'data'</span>] },
</code></pre>
<div>
<div>
    Enter fullscreen mode
    


    Exit fullscreen mode
    


</div>
</div>
</div>



<p>Gee I wonder why all the images were being blocked. Hmm.</p>

<p>With the fix in place, and my tests written, it was time to <code>git rebase</code>, <code>push</code>, and comment.</p>

<p><a href="https://github.com/Seneca-CDOT/telescope/pull/1282">Here is the final PR</a> for the Telescope portion of this assignment.</p>




<p>Overall I'm feeling really... well, okayish about this PR (and everything, really). I look around and see some <a href="https://github.com/Seneca-CDOT/telescope/pull/1274">really great</a> <a href="https://github.com/Seneca-CDOT/telescope/pull/1281">PRs by other students</a>. Why can't I be that good? Why can't I code this well? Well, in time maybe. Sucking at something is the first step towards not sucking at something. At least I always tell myself that. What a sucker I am.</p><p>&nbsp;<b>The Lab</b></p><p>This weeks lab was all about starting to learn how to work with Telescope and to setup its development environment. I also learned how to make a gist and use the diff command.</p><p>Setting up Telescopes environment was a real struggle. There is just so many moving parts going into the project that it was quite a task to get it running, though I'm still not quite sure if I got it running correctly. I ended setting up Redis Server and Elastic Search locally on my machine. Elastic Search seems to be working correctly since I was able to access the blog feeds, but I'm still not too sure about Redis.</p><p><b>Changing my LinkStatus program</b></p><p>I actually needed to put in a lot of changes to get the program to work with telescope. I added a new command that would start the whole telescope process called "-t". Using ./LinkStatus http://localhost:3000/posts -t would access the 10 most recent blog URLs and convert them into a JSON file. I then setup a struct to hold this data so I could then parse and format it into a proper URL into a another new file. With this I could use my program normally without many changes besides a new regex pattern to look for localhost URLs.</p><p>Here's the new Telescope output:</p><div><a href="https://1.bp.blogspot.com/-lsGlT6xJDsw/X6RkuEwEXiI/AAAAAAAAFjM/wI4eG3Ez9AAKdjfZxMNZdTfxqcvKqgYIACLcBGAsYHQ/s586/tele.PNG"><img src="https://1.bp.blogspot.com/-lsGlT6xJDsw/X6RkuEwEXiI/AAAAAAAAFjM/wI4eG3Ez9AAKdjfZxMNZdTfxqcvKqgYIACLcBGAsYHQ/w462-h251/tele.PNG" loading="lazy"></a></div><br><p>Since I had access to the JSON format for the blog data (id, URL) I choose to construct the URLs since each of them followed a similar pattern. I simply just appended "/posts/url" onto a premade string and appending that data to a file. The function completed a few important tasks:</p><p></p><ul><li>Create a JSON file</li><li>Perform a Get request on localhost:3000</li><li>Read and pull all the JSON data into the file</li><li>Create an object of type Telescope to hold the id and URL values</li><li>Populate that object with the data using Unmarshal</li><li>Create a new text file</li><li>Write to the new text file a constructed URL using the URL value</li></ul><p></p><p>Here's the new Struct and the new function to make this all work:</p><div><div>//Telescope&nbsp;struct&nbsp;which&nbsp;lays&nbsp;out&nbsp;the&nbsp;json&nbsp;data&nbsp;for&nbsp;easy&nbsp;storage</div><div>type&nbsp;Telescope&nbsp;struct&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;ID&nbsp;&nbsp;string&nbsp;`json:"id"`</div><div>&nbsp;&nbsp;&nbsp;&nbsp;URL&nbsp;string&nbsp;`json:"url"`</div><div>}</div><div>func&nbsp;telescopeParse(file&nbsp;string)&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println("Telescope&nbsp;Parsing")</div><div>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(file)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println("----------------------------------------------------------------------------------")</div><div>&nbsp;&nbsp;&nbsp;&nbsp;//Get&nbsp;the&nbsp;json&nbsp;data&nbsp;in&nbsp;a&nbsp;file</div><div>&nbsp;&nbsp;&nbsp;&nbsp;out,&nbsp;_&nbsp;:=&nbsp;os.OpenFile("telescopeData.json",&nbsp;os.O_APPEND|os.O_CREATE|os.O_WRONLY,&nbsp;0644)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;defer&nbsp;out.Close()</div><div>&nbsp;&nbsp;&nbsp;&nbsp;resp,&nbsp;err&nbsp;:=&nbsp;http.Get(file)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.Println(err)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;defer&nbsp;resp.Body.Close()</div><div>&nbsp;&nbsp;&nbsp;&nbsp;_,&nbsp;err&nbsp;=&nbsp;io.Copy(out,&nbsp;resp.Body)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.Println(err)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;jsonFile,&nbsp;err&nbsp;:=&nbsp;os.Open("telescopeData.json")</div><div>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(err)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;byteValue,&nbsp;err&nbsp;:=&nbsp;ioutil.ReadAll(jsonFile)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(err)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;teleData&nbsp;[]Telescope</div><div>&nbsp;&nbsp;&nbsp;&nbsp;err&nbsp;=&nbsp;json.Unmarshal(byteValue,&nbsp;&amp;teleData)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fmt.Println(err)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;telescopeFile,&nbsp;err&nbsp;:=&nbsp;os.OpenFile("tData.txt",&nbsp;os.O_APPEND|os.O_CREATE|os.O_WRONLY,&nbsp;0644)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;err&nbsp;!=&nbsp;nil&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.Fatal(err)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;:=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;len(teleData);&nbsp;i++&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;telescopeFile.Write([]byte("http://localhost:3000"&nbsp;+&nbsp;teleData[i].URL&nbsp;+&nbsp;"&nbsp;"))</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div><div>&nbsp;&nbsp;&nbsp;&nbsp;telescopeFile.Close()</div><div>&nbsp;&nbsp;&nbsp;&nbsp;jsonFile.Close()</div><div>}</div></div><p>Since I'm new to working with GO, I had to research quite a bit on how to work with JSON data for this lab. I ended up using the encoding/json package to work with the data and it went pretty well.</p><p>With a newly created file in hand the program works as normal, but a some additional of a new regex pattern in file.go was introduced to handle localhost URLs.</p><div><div>if&nbsp;telescope&nbsp;==&nbsp;true&nbsp;{</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;re&nbsp;=&nbsp;regexp.MustCompile(`https?:\/\/localhost:[0-9]{1,5}\/([-a-zA-Z0-9()@:%_\+.~#?&amp;\/=]*)`)</div><div>&nbsp;&nbsp;&nbsp;&nbsp;}</div></div><p><b>Using Gist and Diff</b></p><p>Once my work was finishing I had to create a gist to easily share my work. I added my two files I worked on then started to think how to use the diff command. At first I thought maybe download for gist with old and new files to then run the command, but after searching up the diff command docs I found out how to specify branches. From here I used&nbsp;git diff telescope master -- main.go.</p><p>I ran this command on both my files and added it to my gist.</p><p><b>What's</b><b>&nbsp;Next?</b></p><p>Over the course of this weekend and the next week Im going to be working with Telescope to finish my release 0.3 assignment. I already went out and got assigned for an issue to solve, so now I can focus on learning how to work with and solve this issue.</p><p>The issue I decided to work on was to add an additional feature to the search bar. I would need to make the program support autocomplete on the authors name as you would be typing and have them come up underneath the search bar.&nbsp;<a href="https://github.com/Seneca-CDOT/telescope/issues/1260">Add autocomplete to search for Authors #1260</a></p><p><br></p><p>It is no exaggeration to say that this assignment is one of the most challenging. In setting up the Telescope, I started really carefully because it looked difficult and challenge. I installed docker and docker-compose to work with Redis and Elasticsearch. But I had an issue that could not work in my laptop. I fixed this issue by searching in google but I had another issue “I can’t use ‘npm start'”.</p>



<figure><img src="https://mintaedotblog.files.wordpress.com/2020/11/e18489e185b3e1848fe185b3e18485e185b5e186abe18489e185a3e186ba-2020-11-04-e1848be185a9e18492e185ae-2.38.56.png?w=1024" loading="lazy"></figure>



<p><strong>How to fix this issue?</strong></p>



<p>To fix my issue, I searched Slack because I think someone had the same issue before. And Also I sent a message to another student who already finished this lab. She read my error message and give me an answer that I need to install npm. I felt really shy and I thought I already installed it before. After fixing my issues, perfectly it was working</p>



<figure><img src="https://mintaedotblog.files.wordpress.com/2020/11/e18489e185b3e1848fe185b3e18485e185b5e186abe18489e185a3e186ba-2020-11-04-e1848be185a9e18492e185ae-3.13.45.png?w=1024" loading="lazy"></figure>



<p><strong>Add new feature in my tool “Check Links in Telescope Posts”</strong></p>



<p>I created branch for adding new feature. I modify my code to check the links in telescope posts. but I had issue to check URLs. The first issue is my tools can’t check the urls in telescope posts. it sent me some error messages</p>



<figure><img src="https://mintaedotblog.files.wordpress.com/2020/11/e18489e185b3e1848fe185b3e18485e185b5e186abe18489e185a3e186ba-2020-11-05-e1848be185a9e18492e185ae-2.52.40.png?w=1024" loading="lazy"></figure>



<p>I searched on google but I couldn’t find an answer to fix this error. so I change my plan to check URLs. To fix this error, I decided to put the URL I had to check into the existing file and check it because I wanted to check if there was a problem with these URLs. URLs have no problems and it will work at the file. So I couldn’t check URLs directly but I could check URLs with creating file.</p>



<p><strong>To fix the issue</strong></p>



<p>I planed that I brought URLs and put URLs in the new file I will create when I run the tool. And then I will check that file which had URLs from telescope posts. It was perfectly working and all of URLs is good status code.</p>



<figure><img src="https://mintaedotblog.files.wordpress.com/2020/11/e18489e185b3e1848fe185b3e18485e185b5e186abe18489e185a3e186ba-2020-11-05-e1848be185a9e18492e185ae-3.02.27.png?w=1024" loading="lazy"></figure>



<p></p><h5>Fork, Clone, Set Up Telescope</h5>



<ol><li>Fork? did this a multiple times</li><li>Clone? did this a millions of times</li><li>Set up the Telescope? failure. </li></ol>



<h5>Setting the the Telescope for Windows users:</h5>



<p>I had a hard time in setting up Telescope, the instruction was so much to read. I am not really a good “instruction follower” (as you can see from my older posts) so I messed up many times. I downloaded a bunch of stuffs that wasn’t really needed or for me. So for my future self, here’s how you set  up the Telescope:</p>



<ol><li>Download and install <a href="https://hub.docker.com/editions/community/docker-ce-desktop-windows">Docker</a></li><li>Make sure you’re using WSL2 from the Docker’s settings</li><li>Open VS Code, and type in the following commands:</li></ol>


<pre>$ copy env.example .env
//Open .env and make sure you have assigned 1 to: MOCK_ELASTIC=1

$ start docker

$ docker-compose up --build redis elasticsearch
//ctrl+c to get out 

$ npm start
//open up http://localhost:3000/posts or http://localhost:3000/feeds to see the data
</pre>


<p>I then added the “localhost” feature in my Bapples, this feature takes in any URL, then put all the contents into a string. I then parsed in JSON file to take the URL post, each URL post will then be checked if the link is good, bad, or unknown:</p>



<figure><div>
<a href="https://cdn.discordapp.com/attachments/766377851510980628/773759424766279710/unknown.png"><img src="https://cdn.discordapp.com/attachments/766377851510980628/773759424766279710/unknown.png" loading="lazy"></a>
</div></figure>



<p>I learned about GitHub Gist, its pretty cool as we can see all the changes made from 2 different commits. Take a look at this wonderful Gist:</p>



<figure><div>
<div>
    <div>
      <div>
        <div>
  <div>
    

  <div>
      
<table>
      <tbody><tr>
        <td></td>
        <td>diff –git a/assets/bapples.jar b/assets/bapples.jar</td>
      </tr>
      <tr>
        <td></td>
        <td>index c5231eb..a1f86c8 100644</td>
      </tr>
      <tr>
        <td></td>
        <td>Binary files a/assets/bapples.jar and b/assets/bapples.jar differ</td>
      </tr>
      <tr>
        <td></td>
        <td>diff –git a/src/nesabyte_bapples/Cleaner.java b/src/nesabyte_bapples/Cleaner.java</td>
      </tr>
      <tr>
        <td></td>
        <td>index 58fb6ba..d925b05 100644</td>
      </tr>
      <tr>
        <td></td>
        <td>— a/src/nesabyte_bapples/Cleaner.java</td>
      </tr>
      <tr>
        <td></td>
        <td>+++ b/src/nesabyte_bapples/Cleaner.java</td>
      </tr>
      <tr>
        <td></td>
        <td>@@ -37,7 +37,7 @@ public class Cleaner{// extends UrlCleaner{</td>
      </tr>
      <tr>
        <td></td>
        <td>      */</td>
      </tr>
      <tr>
        <td></td>
        <td>     public static void main(String[] args) throws Exception {</td>
      </tr>
      <tr>
        <td></td>
        <td> </td>
      </tr>
      <tr>
        <td></td>
        <td>–        String mUrl, html, txt = "";</td>
      </tr>
      <tr>
        <td></td>
        <td>+        String mUrl, html, txt = "", lh;</td>
      </tr>
      <tr>
        <td></td>
        <td>         HashSet&lt;String&gt; m_url;</td>
      </tr>
      <tr>
        <td></td>
        <td>         HashSet&lt;String&gt; commands;</td>
      </tr>
      <tr>
        <td></td>
        <td> </td>
      </tr>
      <tr>
        <td></td>
        <td>@@ -64,6 +64,9 @@ public class Cleaner{// extends UrlCleaner{</td>
      </tr>
      <tr>
        <td></td>
        <td>             //get the html from the command</td>
      </tr>
      <tr>
        <td></td>
        <td>             html = Handlers.pullHTML(str);</td>
      </tr>
      <tr>
        <td></td>
        <td> </td>
      </tr>
      <tr>
        <td></td>
        <td>+            //get single url localhost</td>
      </tr>
      <tr>
        <td></td>
        <td>+            lh = Handlers.pullLink(str);</td>
      </tr>
      <tr>
        <td></td>
        <td>+</td>
      </tr>
      <tr>
        <td></td>
        <td>             try {</td>
      </tr>
      <tr>
        <td></td>
        <td>                 //if user gave 1 or more commands</td>
      </tr>
      <tr>
        <td></td>
        <td>                 if (commands.size() &gt; 0) {</td>
      </tr>
      <tr>
        <td></td>
        <td>@@ -73,7 +76,7 @@ public class Cleaner{// extends UrlCleaner{</td>
      </tr>
      <tr>
        <td></td>
        <td> </td>
      </tr>
      <tr>
        <td></td>
        <td>                         //if user wants the check the version</td>
      </tr>
      <tr>
        <td></td>
        <td>                         if (cmds.matches("–v") || cmds.matches("–version")) {</td>
      </tr>
      <tr>
        <td></td>
        <td>–                            System.out.println("Bapples version: bap.v.03");</td>
      </tr>
      <tr>
        <td></td>
        <td>+                            System.out.println("Bapples version: bap.v.04");</td>
      </tr>
      <tr>
        <td></td>
        <td> </td>
      </tr>
      <tr>
        <td></td>
        <td>                             //if you wants to check the help</td>
      </tr>
      <tr>
        <td></td>
        <td>                         } else if (cmds.matches("–h") || cmds.matches("–help")) {</td>
      </tr>
      <tr>
        <td></td>
        <td>@@ -132,11 +135,14 @@ public class Cleaner{// extends UrlCleaner{</td>
      </tr>
      <tr>
        <td></td>
        <td>                             JsonHandler.tobeJSON(html);</td>
      </tr>
      <tr>
        <td></td>
        <td> </td>
      </tr>
      <tr>
        <td></td>
        <td>                             //if user wants to ignore urls, read ignore-url from txt file</td>
      </tr>
      <tr>
        <td></td>
        <td>–                        } else if((cmds.matches("–ignore") || cmds.matches("–i"))){</td>
      </tr>
      <tr>
        <td></td>
        <td>–</td>
      </tr>
      <tr>
        <td></td>
        <td>+                        } else if((cmds.matches("–ignore") || cmds.matches("–i"))) {</td>
      </tr>
      <tr>
        <td></td>
        <td>                             txt = HtmlHandler.pullTXT(str);</td>
      </tr>
      <tr>
        <td></td>
        <td>                             File directory = new File(txt);</td>
      </tr>
      <tr>
        <td></td>
        <td>–                            HtmlHandler.classifyingTXT(directory.getAbsolutePath(),html, unknown);</td>
      </tr>
      <tr>
        <td></td>
        <td>+                            HtmlHandler.classifyingTXT(directory.getAbsolutePath(), html, unknown);</td>
      </tr>
      <tr>
        <td></td>
        <td>+</td>
      </tr>
      <tr>
        <td></td>
        <td>+                            //if user wants to check urls from localhost</td>
      </tr>
      <tr>
        <td></td>
        <td>+                        } else if((cmds.matches("–localhost") || cmds.matches("–lh")) &amp;&amp; m_url.size() &gt; 0) {</td>
      </tr>
      <tr>
        <td></td>
        <td>+                            LocalHostHandler.classifyingLH(lh);</td>
      </tr>
      <tr>
        <td></td>
        <td> </td>
      </tr>
      <tr>
        <td></td>
        <td>                             //if nothing matches, command is not allowed</td>
      </tr>
      <tr>
        <td></td>
        <td>                         } else {</td>
      </tr>
      <tr>
        <td></td>
        <td>diff –git a/src/nesabyte_bapples/Handlers.java b/src/nesabyte_bapples/Handlers.java</td>
      </tr>
      <tr>
        <td></td>
        <td>index 84325d7..192d210 100644</td>
      </tr>
      <tr>
        <td></td>
        <td>— a/src/nesabyte_bapples/Handlers.java</td>
      </tr>
      <tr>
        <td></td>
        <td>+++ b/src/nesabyte_bapples/Handlers.java</td>
      </tr>
      <tr>
        <td></td>
        <td>@@ -158,6 +158,23 @@ public class Handlers {</td>
      </tr>
      <tr>
        <td></td>
        <td>         return links;</td>
      </tr>
      <tr>
        <td></td>
        <td>     }</td>
      </tr>
      <tr>
        <td></td>
        <td> </td>
      </tr>
      <tr>
        <td></td>
        <td>+    public static String pullLink(String text) {</td>
      </tr>
      <tr>
        <td></td>
        <td>+</td>
      </tr>
      <tr>
        <td></td>
        <td>+        //regex to find the link</td>
      </tr>
      <tr>
        <td></td>
        <td>+        String regex = "(?:(?:https?|ftp)://)[-A-Za-z0-9+&amp;@#/%?=~_()|!:,.;]*[-A-Za-z0-9+&amp;@#/%=~_()|]";</td>
      </tr>
      <tr>
        <td></td>
        <td>+        Pattern p = Pattern.compile(regex);</td>
      </tr>
      <tr>
        <td></td>
        <td>+        Matcher m = p.matcher(text);</td>
      </tr>
      <tr>
        <td></td>
        <td>+</td>
      </tr>
      <tr>
        <td></td>
        <td>+        while (m.find()) {</td>
      </tr>
      <tr>
        <td></td>
        <td>+            String urlStr = m.group();</td>
      </tr>
      <tr>
        <td></td>
        <td>+            if (urlStr.startsWith("(") &amp;&amp; urlStr.endsWith(")")) {</td>
      </tr>
      <tr>
        <td></td>
        <td>+                urlStr = urlStr.substring(1, urlStr.length() – 1);</td>
      </tr>
      <tr>
        <td></td>
        <td>+            }</td>
      </tr>
      <tr>
        <td></td>
        <td>+            return urlStr;</td>
      </tr>
      <tr>
        <td></td>
        <td>+        }</td>
      </tr>
      <tr>
        <td></td>
        <td>+        return "";</td>
      </tr>
      <tr>
        <td></td>
        <td>+    }</td>
      </tr>
      <tr>
        <td></td>
        <td>+</td>
      </tr>
      <tr>
        <td></td>
        <td>     /***</td>
      </tr>
      <tr>
        <td></td>
        <td>      * this method accepts a string, it finds all the COMMANDS from the string.</td>
      </tr>
      <tr>
        <td></td>
        <td>      * It recognizes the link through the help of the regex.</td>
      </tr>
      <tr>
        <td></td>
        <td>@@ -191,21 +208,22 @@ public class Handlers {</td>
      </tr>
      <tr>
        <td></td>
        <td>      * This method is called when the user wants help, all commands is listed in here</td>
      </tr>
      <tr>
        <td></td>
        <td>      */</td>
      </tr>
      <tr>
        <td></td>
        <td>     public static void bappleHelp() {</td>
      </tr>
      <tr>
        <td></td>
        <td>–        System.out.println("———————————————————————————");</td>
      </tr>
      <tr>
        <td></td>
        <td>–        System.out.println("- WELCOME TO BAPPLES! Finding bad apples from any LINKS or HTML files           -");</td>
      </tr>
      <tr>
        <td></td>
        <td>–        System.out.println("———————————————————————————");</td>
      </tr>
      <tr>
        <td></td>
        <td>–        System.out.println("-      –v or –version | to check the Bapple version                           -");</td>
      </tr>
      <tr>
        <td></td>
        <td>–        System.out.println("-      –h or –help    | to check the Bapple help                              -");</td>
      </tr>
      <tr>
        <td></td>
        <td>–        System.out.println("-      &lt;filename&gt;       | to validate links within a file                       -");</td>
      </tr>
      <tr>
        <td></td>
        <td>–        System.out.println("-      –200            | to list urls with status code: SUCCESS                -");</td>
      </tr>
      <tr>
        <td></td>
        <td>–        System.out.println("-      –400 or –404   | to list urls with status code: CLIENT ERRORS          -");</td>
      </tr>
      <tr>
        <td></td>
        <td>–        System.out.println("-      –XXX            | to list urls with status code: UNKNOWNS               -");</td>
      </tr>
      <tr>
        <td></td>
        <td>–        System.out.println("-      –secure         | to check URLS with http:// if they work with https:// -");</td>
      </tr>
      <tr>
        <td></td>
        <td>–        System.out.println("-      –all            | to list urls with all status                          -");</td>
      </tr>
      <tr>
        <td></td>
        <td>–        System.out.println("-      –good           | to list urls with good status code: 200               -");</td>
      </tr>
      <tr>
        <td></td>
        <td>–        System.out.println("-      –bad            | to list urls with bad status code: 404 and 400        -");</td>
      </tr>
      <tr>
        <td></td>
        <td>–        System.out.println("-      –i or –ignore  | to list urls except ignore url list                   -");</td>
      </tr>
      <tr>
        <td></td>
        <td>–        System.out.println("———————————————————————————");</td>
      </tr>
      <tr>
        <td></td>
        <td>+        System.out.println("————————————————————————————-");</td>
      </tr>
      <tr>
        <td></td>
        <td>+        System.out.println("- WELCOME TO BAPPLES! Finding bad apples from any LINKS or HTML files               -");</td>
      </tr>
      <tr>
        <td></td>
        <td>+        System.out.println("————————————————————————————-");</td>
      </tr>
      <tr>
        <td></td>
        <td>+        System.out.println("-      –v or –version     | to check the Bapple version                           -");</td>
      </tr>
      <tr>
        <td></td>
        <td>+        System.out.println("-      –h or –help        | to check the Bapple help                              -");</td>
      </tr>
      <tr>
        <td></td>
        <td>+        System.out.println("-      &lt;filename&gt;           | to validate links within a file                       -");</td>
      </tr>
      <tr>
        <td></td>
        <td>+        System.out.println("-      –200                | to list urls with status code: SUCCESS                -");</td>
      </tr>
      <tr>
        <td></td>
        <td>+        System.out.println("-      –400 or –404       | to list urls with status code: CLIENT ERRORS          -");</td>
      </tr>
      <tr>
        <td></td>
        <td>+        System.out.println("-      –XXX                | to list urls with status code: UNKNOWNS               -");</td>
      </tr>
      <tr>
        <td></td>
        <td>+        System.out.println("-      –secure             | to check URLS with http:// if they work with https:// -");</td>
      </tr>
      <tr>
        <td></td>
        <td>+        System.out.println("-      –all                | to list urls with all status                          -");</td>
      </tr>
      <tr>
        <td></td>
        <td>+        System.out.println("-      –good               | to list urls with good status code: 200               -");</td>
      </tr>
      <tr>
        <td></td>
        <td>+        System.out.println("-      –bad                | to list urls with bad status code: 404 and 400        -");</td>
      </tr>
      <tr>
        <td></td>
        <td>+        System.out.println("-      –i or –ignore      | to list urls except ignore url list                   -");</td>
      </tr>
      <tr>
        <td></td>
        <td>+        System.out.println("-      –lh or –localhost  | to check telescope links                              -");</td>
      </tr>
      <tr>
        <td></td>
        <td>+        System.out.println("————————————————————————————-");</td>
      </tr>
      <tr>
        <td></td>
        <td>     }</td>
      </tr>
      <tr>
        <td></td>
        <td> </td>
      </tr>
      <tr>
        <td></td>
        <td>     /***</td>
      </tr>
      <tr>
        <td></td>
        <td>diff –git a/src/nesabyte_bapples/LocalHostHandler.java b/src/nesabyte_bapples/LocalHostHandler.java</td>
      </tr>
      <tr>
        <td></td>
        <td>new file mode 100644</td>
      </tr>
      <tr>
        <td></td>
        <td>index 0000000..c4ef400</td>
      </tr>
      <tr>
        <td></td>
        <td>— /dev/null</td>
      </tr>
      <tr>
        <td></td>
        <td>+++ b/src/nesabyte_bapples/LocalHostHandler.java</td>
      </tr>
      <tr>
        <td></td>
        <td>@@ -0,0 +1,59 @@</td>
      </tr>
      <tr>
        <td></td>
        <td>+package nesabyte_bapples;</td>
      </tr>
      <tr>
        <td></td>
        <td>+</td>
      </tr>
      <tr>
        <td></td>
        <td>+import java.util.HashSet;</td>
      </tr>
      <tr>
        <td></td>
        <td>+import java.util.regex.Matcher;</td>
      </tr>
      <tr>
        <td></td>
        <td>+import java.util.regex.Pattern;</td>
      </tr>
      <tr>
        <td></td>
        <td>+</td>
      </tr>
      <tr>
        <td></td>
        <td>+public class LocalHostHandler {</td>
      </tr>
      <tr>
        <td></td>
        <td>+</td>
      </tr>
      <tr>
        <td></td>
        <td>+    /***</td>
      </tr>
      <tr>
        <td></td>
        <td>+     * this method takes in the localhost link, then save all its contents into a string.</td>
      </tr>
      <tr>
        <td></td>
        <td>+     * The string then is processed by the use of the pullLink() method to take all of the links and be placed inside a HashSet.</td>
      </tr>
      <tr>
        <td></td>
        <td>+     * Then the Results(int, alink, gcounter, bcounter, ucounter) method is called to display the result of this method</td>
      </tr>
      <tr>
        <td></td>
        <td>+     * @param m_url</td>
      </tr>
      <tr>
        <td></td>
        <td>+     */</td>
      </tr>
      <tr>
        <td></td>
        <td>+    public static void classifyingLH(String m_url){</td>
      </tr>
      <tr>
        <td></td>
        <td>+</td>
      </tr>
      <tr>
        <td></td>
        <td>+        try {</td>
      </tr>
      <tr>
        <td></td>
        <td>+            String content =  UrlHandler.UrlReader(m_url);</td>
      </tr>
      <tr>
        <td></td>
        <td>+</td>
      </tr>
      <tr>
        <td></td>
        <td>+            HashSet&lt;String&gt; aLink = pullPosts(content);</td>
      </tr>
      <tr>
        <td></td>
        <td>+</td>
      </tr>
      <tr>
        <td></td>
        <td>+            System.out.println("\nTotal Apple count: " + aLink.size());</td>
      </tr>
      <tr>
        <td></td>
        <td>+</td>
      </tr>
      <tr>
        <td></td>
        <td>+            //counters for good, bad, unknown links</td>
      </tr>
      <tr>
        <td></td>
        <td>+            int Gcounter = 0, Bcounter = 0, Ucounter = 0;</td>
      </tr>
      <tr>
        <td></td>
        <td>+</td>
      </tr>
      <tr>
        <td></td>
        <td>+            Handlers.Results(999,aLink, Gcounter, Bcounter, Ucounter);</td>
      </tr>
      <tr>
        <td></td>
        <td>+        } catch (Exception e) {</td>
      </tr>
      <tr>
        <td></td>
        <td>+            System.out.println("\n\nYou gave me a Bad Apple Tree: " + e + "\n" + m_url);</td>
      </tr>
      <tr>
        <td></td>
        <td>+        }</td>
      </tr>
      <tr>
        <td></td>
        <td>+    }</td>
      </tr>
      <tr>
        <td></td>
        <td>+</td>
      </tr>
      <tr>
        <td></td>
        <td>+    /***</td>
      </tr>
      <tr>
        <td></td>
        <td>+     * this method accepts a string, it finds all the /posts/* from the string.</td>
      </tr>
      <tr>
        <td></td>
        <td>+     * It recognizes the posts id and store it into the links</td>
      </tr>
      <tr>
        <td></td>
        <td>+     * then returns the LINKS</td>
      </tr>
      <tr>
        <td></td>
        <td>+     *      *</td>
      </tr>
      <tr>
        <td></td>
        <td>+     * @param text</td>
      </tr>
      <tr>
        <td></td>
        <td>+     * @return</td>
      </tr>
      <tr>
        <td></td>
        <td>+     */</td>
      </tr>
      <tr>
        <td></td>
        <td>+    public static HashSet&lt;String&gt; pullPosts(String text){</td>
      </tr>
      <tr>
        <td></td>
        <td>+        HashSet&lt;String&gt; links = new HashSet&lt;String&gt;();</td>
      </tr>
      <tr>
        <td></td>
        <td>+</td>
      </tr>
      <tr>
        <td></td>
        <td>+        String regex = "/posts/[-A-Za-z0-9]*[-A-Za-z0-9]";// "(?:(?:https?|ftp)://)[-A-Za-z0-9+&amp;@#/%?=~_()|!:,.;]*[-A-Za-z0-9+&amp;@#/%=~_()|]";</td>
      </tr>
      <tr>
        <td></td>
        <td>+        Pattern p = Pattern.compile(regex);</td>
      </tr>
      <tr>
        <td></td>
        <td>+        Matcher m = p.matcher(text);</td>
      </tr>
      <tr>
        <td></td>
        <td>+        while (m.find()) {</td>
      </tr>
      <tr>
        <td></td>
        <td>+            String urlStr = m.group();</td>
      </tr>
      <tr>
        <td></td>
        <td>+            if (urlStr.startsWith("(") &amp;&amp; urlStr.endsWith(")")) {</td>
      </tr>
      <tr>
        <td></td>
        <td>+                urlStr = urlStr.substring(1, urlStr.length() – 1);</td>
      </tr>
      <tr>
        <td></td>
        <td>+            }</td>
      </tr>
      <tr>
        <td></td>
        <td>+            //if a link is found, save it in the hashset</td>
      </tr>
      <tr>
        <td></td>
        <td>+            urlStr = "<a href="http://localhost:3000&quot;+">http://localhost:3000"+</a> urlStr;</td>
      </tr>
      <tr>
        <td></td>
        <td>+            links.add(urlStr);</td>
      </tr>
      <tr>
        <td></td>
        <td>+        }</td>
      </tr>
      <tr>
        <td></td>
        <td>+        return links;</td>
      </tr>
      <tr>
        <td></td>
        <td>+</td>
      </tr>
      <tr>
        <td></td>
        <td>+    }</td>
      </tr>
      <tr>
        <td></td>
        <td>+}</td>
      </tr>
</tbody></table>


  </div>

  </div>
</div>

      </div>
      <div>
        <a href="https://gist.github.com/NesaByte/2934437fe39ac65a8d25130679f2ec8c/raw/b5925e3cb50fb096d0446c1cbf6fab0623abc7c2/lab6.diff">view raw</a>
        <a href="https://gist.github.com/NesaByte/2934437fe39ac65a8d25130679f2ec8c#file-lab6-diff">lab6.diff</a>
        hosted with ❤ by <a href="https://github.com">GitHub</a>
      </div>
    </div>
</div>

</div></figure>



<p></p>